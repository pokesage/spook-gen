<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <link rel="stylesheet" type="text/css" href="./css/first.css">
    <script src="./resources/threejs/r115/build/three.js"></script>
    <script src= "https://player.twitch.tv/js/embed/v1.js"></script>
    <title>Reading You A "Poe"m</title>
  </head>
  <body>
     <a href="index2.html">  
        <div id="screen"></div>
        </a> 

        <div id="twitch"></div>
    <script type = "text/javascript">
    const options = {
      width : 400,
      height : 400,
      channel : "melahi48",
    };
    const player = new Twitch.Player("twitch", options);
    player.setVolume(0.7);
    </script>

    <input type="radio" id="cageAnim" name="image" checked>

<input type="radio" id="a-up" name="a-vertical">
<input type="radio" id="a-middle" name="a-vertical" checked>
<input type="radio" id="a-down" name="a-vertical">
<input type="radio" id="a-left" name="a-horazontal" checked>
<input type="radio" id="a-center" name="a-horazontal">
<input type="radio" id="a-right" name="a-horazontal">
<input type="radio" id="b-up" name="b-vertical" checked>
<input type="radio" id="b-middle" name="b-vertical">
<input type="radio" id="b-down" name="b-vertical">
<input type="radio" id="b-left" name="b-horazontal" checked>
<input type="radio" id="b-center" name="b-horazontal">
<input type="radio" id="b-right" name="b-horazontal">
<input type="radio" id="c-up" name="c-vertical">
<input type="radio" id="c-middle" name="c-vertical" checked>
<input type="radio" id="c-down" name="c-vertical">
<input type="radio" id="c-left" name="c-horazontal">
<input type="radio" id="c-center" name="c-horazontal">
<input type="radio" id="c-right" name="c-horazontal" checked>
<input type="radio" id="d-up" name="d-vertical" checked>
<input type="radio" id="d-middle" name="d-vertical">
<input type="radio" id="d-down" name="d-vertical">
<input type="radio" id="d-left" name="d-horazontal">
<input type="radio" id="d-center" name="d-horazontal" checked>
<input type="radio" id="d-right" name="d-horazontal">
<input type="radio" id="e-up" name="e-vertical">
<input type="radio" id="e-middle" name="e-vertical">
<input type="radio" id="e-down" name="e-vertical" checked>
<input type="radio" id="e-left" name="e-horazontal">
<input type="radio" id="e-center" name="e-horazontal" checked>
<input type="radio" id="e-right" name="e-horazontal">
<input type="radio" id="f-up" name="f-vertical">
<input type="radio" id="f-middle" name="f-vertical" checked>
<input type="radio" id="f-down" name="f-vertical">
<input type="radio" id="f-left" name="f-horazontal">
<input type="radio" id="f-center" name="f-horazontal" checked>
<input type="radio" id="f-right" name="f-horazontal">
<input type="radio" id="g-up" name="g-vertical" checked>
<input type="radio" id="g-middle" name="g-vertical">
<input type="radio" id="g-down" name="g-vertical">
<input type="radio" id="g-left" name="g-horazontal">
<input type="radio" id="g-center" name="g-horazontal">
<input type="radio" id="g-right" name="g-horazontal" checked>
<input type="radio" id="h-up" name="h-vertical">
<input type="radio" id="h-middle" name="h-vertical">
<input type="radio" id="h-down" name="h-vertical" checked>
<input type="radio" id="h-left" name="h-horazontal" checked>
<input type="radio" id="h-center" name="h-horazontal">
<input type="radio" id="h-right" name="h-horazontal">

<div class="board">
  <div class="peice-a">
    <label for="a-up"></label>
    <label for="a-middle"></label>
    <label for="a-down"></label>
    <label for="a-left"></label>
    <label for="a-center"></label>
    <label for="a-right"></label>
  </div>
  <div class="peice-b">
    <label for="b-up"></label>
    <label for="b-middle"></label>
    <label for="b-down"></label>
    <label for="b-left"></label>
    <label for="b-center"></label>
    <label for="b-right"></label>
  </div>
  <div class="peice-c">
    <label for="c-up"></label>
    <label for="c-middle"></label>
    <label for="c-down"></label>
    <label for="c-left"></label>
    <label for="c-center"></label>
    <label for="c-right"></label>
  </div>
  <div class="peice-d">
    <label for="d-up"></label>
    <label for="d-middle"></label>
    <label for="d-down"></label>
    <label for="d-left"></label>
    <label for="d-center"></label>
    <label for="d-right"></label>
  </div>
  <div class="peice-e">
    <label for="e-up"></label>
    <label for="e-middle"></label>
    <label for="e-down"></label>
    <label for="e-left"></label>
    <label for="e-center"></label>
    <label for="e-right"></label>
  </div>
  <div class="peice-f">
    <label for="f-up"></label>
    <label for="f-middle"></label>
    <label for="f-down"></label>
    <label for="f-left"></label>
    <label for="f-center"></label>
    <label for="f-right"></label>
  </div>
  <div class="peice-g">
    <label for="g-up"></label>
    <label for="g-middle"></label>
    <label for="g-down"></label>
    <label for="g-left"></label>
    <label for="g-center"></label>
    <label for="g-right"></label>
  </div>
  <div class="peice-h">
    <label for="h-up"></label>
    <label for="h-middle"></label>
    <label for="h-down"></label>
    <label for="h-left"></label>
    <label for="h-center"></label>
    <label for="h-right"></label>
  </div>
</div>
<a href = 'index2.html'>
<div class="winner">Ah, Free at Last...</div>
</a>
    
  </body>
  <script>
      ~ function() {

        const camera = new THREE.OrthographicCamera(
    -1, // left
     1, // right
     1, // top
    -1, // bottom
    -1, // near,
     1, // far
  );
        //Background Audio

const listener = new THREE.AudioListener();
camera.add(listener);

const sound = new THREE.Audio(listener);

const audioLoader = new THREE.AudioLoader();
audioLoader.load( './assets/poe.mp3', function( buffer ) {
	sound.setBuffer( buffer );
	sound.setLoop( true );
	sound.setVolume( 0.5 );
	sound.play();
});

var spans = [],
        screen = document.getElementById("screen"),
        text = `
        .................................................................................................................................................
       
 To hear me speak you must set me free, and for your trouble I shall offer a reading, a poem from death, written in madness, that is, if you find this message in blackness.
        
        .................................................................................................................................................
        .................................................................................................................................................`;

document.currentScript.text.split(/[\s,.=><\&\-!'/\]\+;()\\["]+/, 169).forEach(function(w) {
        if (w.length > 1) text += w + " ";
});
var CObj = function(elem) {
        this.elem = elem;
        this.x = elem.offsetLeft;
        this.y = elem.offsetTop;
        this.zooming = false;
        this.scale = 1;
}

CObj.prototype.init = function() {
        this.elem.obj = this;
        this.elem.className = 'word';
        this.elem.style.left = this.x + "px";
        this.elem.style.top = this.y + "px";
        this.glow = document.createElement("span");
        this.glow.innerHTML = this.elem.innerHTML;
        this.glow.className = "wordZoom";
        screen.appendChild(this.glow);
        this.glow.style.left = this.x + "px";
        this.glow.style.top = this.y + "px";
}

CObj.prototype.start = function() {
        if (!this.zooming) {
                this.elem.className = "word over";
                this.zooming = true;
                this.glow.style.visibility = "visible";
        }
}

CObj.prototype.zoom = function() {
        if (this.zooming) {
                this.scale *= 1.05;
                if (this.scale < 20) {
                        var c = 512 - this.scale * 20;
                        this.glow.style.transform = this.glow.style.webkitTransform = "scale(" + this.scale + ")";
                        this.glow.style.color = "rgb(" + Math.round(c) + "," + Math.round(c) + "," + Math.round(c) + ")";
                } else {
                        this.zooming = false;
                        this.scale = 1;
                        this.glow.style.transform = this.glow.style.webkitTransform = "scale(1)";
                        this.glow.style.visibility = "hidden";
                        this.elem.className = "word";
                }
        }
}

text += " ... ";
var comp = "",
        word = "",
        tag = false;

for (var i = 0; i < text.length; i++) {
        var c = text.charAt(i);
        if (c == "<") {
                var j = text.indexOf(">", i);
                word += text.substring(i, j + 1);
                i = j;
                tag = true;
        } else {
                if (c == " ") {
                        if (tag) {
                                comp += word + "&nbsp; ";
                                tag = false;
                        } else {
                                comp += "<span>" + word + "</span>&nbsp; ";
                        }
                        word = "";
                } else word += c;
        }
}
screen.innerHTML = comp;

var n = screen.getElementsByTagName("*");
for (var i = 0; i < n.length; i++) {
        var word = n[i];
        spans[i] = new CObj(word);
}

for (var i = 0; i < spans.length; i++) {
        spans[i].init();
}

screen.onmouseover = function(e) {
        e.preventDefault();
        if (e.target.obj) e.target.obj.start();
};

var run = function() {
        requestAnimationFrame(run);
        for (var i = 0; i < spans.length; i++) {
                spans[i].zoom();
        }
};

run();

}();


  </script>
</html>
